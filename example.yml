---
name: twine
pypirc_path: ~/.pypirc
pypirc: |
  [pypi]
  username=${pypi_user}
  password=${pypi_pass}
script:
- test -f $pypirc_path || cat $pypirc > $pypirc_path
- for i in $(find . -name '*.po'); do msgfmt $i -o ${i/.po/.mo}; done
- python3 setup.py explain
- rm -rf dist
- python3 setup.py sdist
- twine upload dist/*

---
name: example
example_var: ./autoplay-example
multiline_var: |
  foo
  bar
setup:
- test -f $example_var || echo "$multiline_var" > $example_var
script:
- cat $example_var

---
name: example-dev
setups:
- example
services:
- watch $example_var
